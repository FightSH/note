## redis数据类型

### string

最基本的数据类型，是**二进制安全的**（可包含任何数据）。value最大是512M

INCR key
redis中的原子操作指**不会被线程调度机制打断的操作**。这种操作一旦开始就一直运行到结束，中间不会有任何切换线程的操作。
redis的原子操作得益于其**单线程**

真实内部存储结构为动态字符串。字符串



### list

字符串列表，单键多值，底层是双向链表（双端操作性能高，通过索引下标操作中间节点性能差）

数据结构为快速链表quicklist
在列表元素较少的情况下会使用一块连续的内存存储，这个结构是ziplist，即压缩列表。其将所有元素挨着存储，分配的是连续的内存。

当数据量比较多的时候，改为quicklist，因为普通链表需要附加指针，会比较浪费空间

Redis将链表和ziplist结合起来组成了quicklist，即将多个ziplist使用双向指针串起来使用，这样即满足了快速的插入删除性能，又不会出现太大的空间冗余.



### set

底层是value为null的hash表，因此添加删除，查找的复杂度都为O(1)



### hash

key—field/value。是一个string类型key的field和value的映射表，特别适合存储对象

底层对应数据结构为两种：ziplist，hashtable。当field-value长度较短且个数较少时，使用ziplist，否则使用hashtable





### zset

和set类似，无重复元素的字符串集合，但是其每个会员都关联了评分，可以通过评分排序。

底层使用了两个数据结构

1. hash，hash作用是关联元素的value和权重score，保障元素value的唯一性，可通过value找到score

2. 跳跃表，目的在于给value进行排序，根据score的范围获取元素列表

   > 调表查询效率堪比红黑树，但实现比红黑树简单。其效率要比有序链表高

### bitmap

位操作，本身是字符串，但是可以对字符串的位进行操作。可将bitmap想象为以位为单位的数组（0,1）

记录偏移量

### hyperloglog

基数大，数量统计问题记录UV，独立IP数等基数很大的统计需要

其花费12KB内存，即可计算接近2^64不哦那个元素的基数

### geospatial

二维坐标，经纬度查询