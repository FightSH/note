## 数据库

1. 数据库中的锁

2. 幻读问题

3. 数据库索引结构

4. 有些sql执⾏很慢，怎么分析？要怎么优化？

   > 通过慢查询日志找出慢sql，通过explain进行分析，判断其可能出现的原因。并进行索引调优
   >
   > 可以从innodb存储引擎⾥⾯的buffer pool⼊⼿，调优对应的buffer pool数量参数，然后继续把索引的结构 B+树和原理讲解⼀次，避免查询的sql频繁的进⾏回表操作，还有主键的值是否是有序的，不建议是⽤uuid，如果使⽤uuid作为主键的后果是啥。然后继续讲⼀下使⽤索引的规则，⼏种索引的类型，怎样命中索引，怎么避免频繁回表。Explain分析sql语句的时候，type命中了哪个类型是最快的，type类型分了哪⼏类等等，如果你能继续带上 分库分表的场景，那就锦上添花了。
   >
   > https://www.yuque.com/docs/share/246649c8-f06d-4bed-aa4b-a41be122df73?# 《mysql索 引》
   >  https://www.yuque.com/docs/share/bb3bfe58-0c7b-4f60-a3e1-4c45fad08e9a?# 《执⾏⼀条 sql语句经历了哪些过程》 

   

5. MySql索引原理，为什么快？为什么失效？

6. 分库分表原则是什么？怎么做的？

7. MySQL中的各种log

8. mvcc机制，事务隔离级别

## Redis

1. 一个视频网站，只统计24h内的点击量
2. Redis内存淘汰机制，定期删除和惰性删除
3. LRU算法(手写)
4. Redis持久化机制？RDB,AOF
5. Redis缓存雪崩，缓存穿透解决方案
6. redis数据结构以及对应的应用场景

## 并发问题和JVM

1. volitale介绍一下，谈下java内存模型

   > https://www.yuque.com/docs/share/4b83a6b7-8d0b-42e2-9224-c3a5bc8aa2d6?# 《MESI缓 存⼀致性协议》 可看

2. CAS原理

3. 常用线程池？参数有哪些

4. ThreadLocal是否了解？原理？那些问题？

5. JVM内存分布模型？对象产生到死亡经历步骤

6. 对象什么时候进入老年代

7. 类加载机制？jvm分区？

   > https://www.yuque.com/docs/share/4360e1c9-cc14-4c90-9c38-ee99effb55bf?# 《两道⾯试 题，带你解析Java类加载机制》
   >
   > https://www.yuque.com/docs/share/a6dd5897-d341-4beb-b838-0ffd3f0c03f0?# 《jvm整体运 ⾏的流程图详解（超详细）》

8. jvm垃圾回收流程，jvm31g和32g区别

   > 
   >

   

## 数据结构

1. ArrayList
2. LinkededList
3. HashMap
4. CopncurrentHashMap

## 消息队列

1. MQ信息积压如何处理？

2. 消息重复？保证消息顺序消费

3. 消息队列选型

   > https://www.yuque.com/docs/share/ee69733a-13a4-4384-b38b-d77c1eb0ed8f?# 《消息队列 技术选型Kafa，RabbitMQ与RocketMQ》

4. 

## Spring相关

1. Spring事务传播机制？Spring事务何时会失效

2. SpringBoot的优点？底层原理？自动装配？

3. SpringBoot和SpringCloud关系

4. 讲下transactional注解原理吧? 底层是操作的什么跟数据库进⾏互通的?

   > https://www.yuque.com/docs/share/f89eb26d-dd15-436b-8253-a01d143913fc?# 《spring事物 的基本原理》

5. Spring中的Bean PostProcessor

6. @Cacheable注解底层原理

7. 一个接口，多个实现类，如何通过注解的方式将实现类放到Bean容器中

## 计算机网络

1. 有三十个http请求能不能一次连接发完
2. 

## 分布式和微服务

1. 分布式锁你⽤过哪些？使⽤的时候要注意什么地⽅？

   > 可以先从redis原⽣的分布式锁讲起，讲⼀下他的优缺点
   >
   > 然后再讲redission实现分布式锁的原理和机制： 
   >
   > （1）加锁：在redis⾥设置hash数据结构，⽣存周期是30000毫秒 
   > （2）维持加锁：代码⾥⼀直加锁，redis⾥的key会⼀直保持存活，后台每隔10秒的定时任务（watchdog）不断 的检查，只要客户端还在加锁，就刷新key的⽣存周期为30000毫秒 
   > （3）可重⼊锁：同⼀个线程可以多次加锁，就是在hash数据结构中将加锁次数累加1 
   > （4）锁互斥：不同客户端，或者不同线程，尝试加锁陷⼊死循环等待 
   >
   > 然后再讲⼀下zk锁，zk与redis做分布式锁的区别和优缺点 zk锁的znode结构和核⼼的watch监听器机制 这⾥顺便把zk锁的如何防⽌⽺群效应的思想也讲⼀下 zk的zab协议的⼤概⽅案也讲⼀下
   >
   > redisson⾮公平锁源码图：https://www.yuque.com/dulante-ikt7c/dy8hn4/eogxqt
   >
   > zookeeper可重⼊锁源码图：https://www.yuque.com/dulante-ikt7c/dy8hn4/gqu12e
   >
   > https://www.yuque.com/docs/share/91e9b9ad-2a40-4648-9256-92bd0abd5aa9?# 《redisson 可重⼊锁（reentrant lock）》
   >
   > https://www.yuque.com/docs/share/faed6566-ff8f-4bab-a172-3bf38dae260c?# 《zk可重⼊锁 源码解析》

   

   

2. 如何保证接口的幂等性？

3. 消息一致性方案?

4. Eureka和nacos和Zookeeper注册中心区别

   > 讲⼀下Eureka注册中⼼是如何保证AP的/Eureka注册表的多级缓存机制。
   > 讲⼀下Zookeeper是如何保证CP的。
   > 讲⼀下nacos是怎样⽀持AP/CP的，顺便讲⼀下nacos集成了配置中⼼的功能。

5. 如何保证系统的高可用与高并发

   > 以从最上层开始慢慢的剖析，如服务器⽤了Lvs + nginx + keepalive的负载均衡架构，LVS服务器，作为负载 均衡调度器，请求到来了以后，直接基于linux内核内部的⼀些底层机制进⾏请求转发，转发给后端的Web服务器池⼦⾥的⼀台服务器，本质上就是在进⾏负载均衡，⽽且因为LVS主要是基于linxu内核级的⼀些底层机制做请求转 发，所以说效率极⾼，单机抗每秒⼏⼗万甚⾄上百万吞吐量绝对不是问题。 
   >
   > 然后就带出MQ异步、MQ削峰、防⽌消息堆积，幂等性处理、多级缓存、Redis Cluster、防⽌缓存雪崩、防⽌缓 存穿透、防⽌缓存击穿、熔断降级技术、分布式锁、分布式调度、分库分表等。

6. 分布式事务？

7. zk和redis如何实现



## 真实情景与故障排查

1.  线上某个程序CPU 100%，⼀般是什么原因导致的？怎么排查？讲讲排查步骤?

   > 通过对应的排查命令如：如ps java进程的pid、Top -Hp、利⽤Jstack 分析。这种CPU 100%出现的原因有很多，例如代码哪⾥没写好出现了死循环、⼀些连接池再调⽤之后，没有合理关闭等等。
   >
   > 继续分析出现这种问题的根本原因是啥？ 那你就可以继续带出JVM的堆内存相关知识点，例如新⽣代、⽼年代有没有合理的分配，java启动参数有没有合理 指定大小，垃圾回收器有没有合理指定，出现问题的时候要合理的输出⽇志，线上可以⽤过jstat、jmap等命令定位出新⽣代、老年代的回收次数和哪些对象占⽤比较大。

2. 如何设计一个RPC框架

   > 通过github地址说明：如框架的可⽤性，可扩展性，可读性，可伸缩性等
   >
   > 然后也讲讲市⾯上⼀些⽐较流量的rpc框架，不同rpc框架他们之间的区别，以及他们是怎么保持上⾯的⼏个性的

3. 如何防止用户恶意刷数据问题？

4. 用过哪些设计模式？结合场景谈

5. 如何防止库存超卖？以及秒杀场景

6. 如果一个接口慢，可能的原因有？

   > 1、⽹络IO （说下数据库优化、redis优化） 
   > 2、磁盘IO （可以⽤异步优化） 
   > 3、锁竞争 （分段加锁、锁粒度，详⻅架构课锁优化策略） 4、jvm优化（如果前⾯没问jvm的话，这时候也可以说⼀下jvm专栏⾥的优化⽅案）

7. 

## 设计题

1. 怎么设计⼀个接⼝的降级⽅案？

   > 降级⽅案要分两种情况 
   > 1、核⼼链路的接⼝不能随便降级，有的接⼝慢，就得在那等着。 
   > 2、⾮核⼼链路参照⾯试突击⾥使⽤Hystrix降级

2. mysql⾥⼀个字段的值需要存⼏百万个id怎么设计？

   > 1、这些id先计算出⼀个base（所有id减去这个base就是个int类型的值） 
   > 2、搞⼀个bitmap，通过⼀个特殊的hash函数计算出（id-base）在bitmap中的位置（这个是唯⼀的） 
   > 3、核⼼思想就是使⽤bitmap存数据

3. ⼀个很⼤的⽂件⾥存的都是些id，怎么统计出重复id的次数？

   > 1、把⼤⽂件拆分成内存可以放下的⼩⽂件⽐如10个⼩⽂件。 2、⼤⽂件中的id通过⼀个ha sh函数计算出hash值，寻址算法找到⼩⽂件 
   > 3、把⼩⽂件加载到内存中⽤HashMap就可以统计了

4. ⼀个⽂件⾥都是电话号码，重复的号码需要记录重复次数，你会怎么设计存储？

   > 1、电话号码可以分成三段，前⾯3位、中间4位、后⾯4位 2、仿照Mysql索引树设计，叶⼦节点挂的是重复次数 
   > 3、⾯试官说可以使⽤混合树（我不了解什么是混合树）

5. 如果实现注册功能，需要考虑哪些点？

   > 1、项⽬初期没什么数据量，单库单表就可以 
   > 2、数据量⼤了以后要考虑分库分表 
   > 3、超时重试 
   > 4、接⼝幂等性 
   > 5、注册功能属于核⼼功能，不能降级
   
6. 缓存一致性方案？

7. 一个数字数组，如何获取第二个最大的数

8. 卖饼找零钱问题,⼀个饼5元,每⼈只能买⼀个,只能买⼀次，每人⼿⾥只有5元,10元,20元,刚开始老板身上没钱，写⼀个⽅法判断是否能找开零钱

9. 优惠劵系统，实现条件的动态配置

10. redis设计限流器？令牌桶或redission信号量

11. 有⼀个客户下了⼀个订单，我怎么才能匹配到直径500⽶范围内的所有骑⼿？如果我要从中选择⼀个骑⼿去接单，应该怎么去设计？

    > redis的geo结构或者es的坐标结构

12. 假如我有⼀个任务，可以允许多个线程同时执⾏，但是⼀旦有⼀个线程执⾏完成后，其他的线程就 ⽴⻢终⽌这个任务，并且后续的线程都⽆法执⾏这个任务，这个功能应该怎么来写？

    > 使用volatile配合interrupt实现

    

    









## Java基础

1. String s = "中国人"，char数组存，byte存，分别占几个字节？String怎么转换成Byte？

2. synchronized的锁升级

   > （1）锁消除 锁消除是JIT编译器对synchronized锁做的优化，在编译的时候，JIT会通过逃逸分析技术，来分析synchronized 锁对象，是不是只可能被⼀个线程来加锁，没有其他的线程来竞争加锁，这个时候编译就不⽤加⼊monitorenter 和monitorexit的指令。 
   > （2）锁粗化 
   > （3）偏向锁 
   > （4）轻量级锁 
   > （5）适应性锁

3. Sleep和Wait区别

4. Synchronized和Lock区别

5. 递归如何保证不进⾏太多的压栈操作? 什么是尾递归? 递归函数栈帧越来越多，如何进⾏递归优化? 编译器底层是怎么对递归优化的? 什么写法可以让递归的栈溢出基本上不可能?

   > https://www.yuque.com/docs/share/9d2c0254-339f-4ec7-9d41-0a525db41ab6?# 《尾递归介绍》

6. A，B，C，D四个请求链条，如何记录这四个服务的⼀个链式调⽤的⽇志?

   > https://www.yuque.com/docs/share/b0fa01d7-c986-44f9-90d4-404850f9fc51?# 《ThreadLocal基础及项⽬中使⽤实战》

7. 

   

   

   

、A，B，C，D四个请求链条，如何记录这四个服务的⼀个链式调⽤的⽇志?

## Netty和NIO

1. netty怎么拆包? 假设让你在应⽤层去设计。如何设计⼀个协议包。? 如何在拆包的过程中去解析你 的那个协议包?

   > https://www.yuque.com/docs/share/647a6046-8d08-45ff-8601-ee3265a1f6bd?# 《如何设计⼀ 个通讯协议》

2. 